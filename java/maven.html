<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Maven</title>
<!-- 2014-07-12 Sat 23:27 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Ted Hagos" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" href="../css/stylesheet.css" type="text/css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="org-div-home-and-up">
 <a accesskey="h" href=""> UP </a>
 |
 <a accesskey="H" href="../index.html"> HOME </a>
</div><div id="content">
<h1 class="title">Maven</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">1. Installation</a></li>
<li><a href="#sec-2">2. Folder structure</a></li>
<li><a href="#sec-3">3. Test</a></li>
<li><a href="#sec-4">4. Java Execute</a></li>
<li><a href="#sec-5">5. Review of the maven commands</a></li>
</ul>
</div>
</div>


<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> Installation</h2>
<div class="outline-text-2" id="text-1">
<ol class="org-ol">
<li>Download the installer from  <a href="http://maven.apache.org/download.cgi">maven site</a>
</li>
<li>Unzip or untar downloaded file, put it somewhere in your file system, preferably a location where you have read | write | execute permissions
</li>
<li>Update the SYSTEM PATH to include the folder where you unzipped the maven installation
</li>
<li>Make sure Maven is working on the command line. Get a terminal window and invoke the maven command &#x2014; <code>mvn</code>. If you did not get a <i>bad command or filename</i> error, that's a good sign.
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> Folder structure</h2>
<div class="outline-text-2" id="text-2">
<p>
Maven expects a folder structure for a project. You can choose not to follow what it expects, but that means you need to do some configuration on your own. If you prefer not to monkey around the config, follow Maven’s world view on directory structure unless you have a really compelling reason not to.
</p>

<p>
The next set of terminal commands prepares a basic Maven project
</p>

<pre class="example">
cd ~/
mkdir BasicProject
cd BasicProject
mkdir -p src/main/java
touch src/main/java/HelloWorld.java
touch pom.xml
</pre>
</div>

<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> The POM file</h3>
<div class="outline-text-3" id="text-2-1">
<p>
Maven expects a pom.xml file on the top level directory of the project. This xml file drives the behavior of the build. There are a couple of things that Maven expects to find inside the pom file. It expects to find the modelVersion, groupId, artifactId and the version.
</p>

<p>
The pom file, short for Project Object Model, is an xml file. It contains information and configuration details about the project. Maven uses these details to do the build.
</p>

<p>
A simple POM file is shown below.
</p>

<pre class="example">
&lt;project&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;com.hagos&lt;/groupId&gt;
  &lt;artifactId&gt;HelloWorld&lt;/artifactId&gt;
  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
  &lt;packaging&gt;jar&lt;/packaging&gt;
&lt;/project&gt;
</pre>

<p>
The <b>modelVersion</b> is always set to 4.0 because it is currently the only supported model for Maven versions 2 and 3. This may change in the future. If Maven 4 comes out and there is another model, you should use the prescribed model and update the modelVersion value appropriately. Where can you find the modelVersion value? The <a href="https://maven.apache.org/pom.html">maven site</a> of course. 
</p>

<p>
The <b>groupId</b> element is the same as the package name, it is that reverse domain name convention you use to organize your java source files, so just use that. The <b>version</b> element is self explanatory, you get to choose that. It simply indicates what version your application is already in.
</p>
</div>
</div>
</div>

<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> Test</h2>
<div class="outline-text-2" id="text-3">
<p>
Create a rudimentary HelloWorld.java source file and save it in <b>/src/main/java</b> folder then try to compile the project. On a terminal window, make sure you are at the top level directory of the <i>BasicProject</i> folder, run the command
</p>

<p>
<code>mvn compile</code>
</p>

<p>
This will compile the project. There is only one source file in the project so far so it may not seem to be a big deal right now. A build tools like Maven shines better when working with multi file projects. 
</p>

<p>
All the compiled codes will be placed in the <b><i>target/classes</i></b> folder. Those were created by Maven during compilation. The BasicProject folder should now resemble the following
</p>

<pre class="example">
.
├── pom.xml
├── src
│   └── main
│       └── java
│           └── HelloWorld.java
└── target
    └── classes
        └── com
            └── hagos
                └── HelloWorld.class
</pre>
</div>


<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> Running the application</h3>
<div class="outline-text-3" id="text-3-1">
<p>
On the same terminal window that you have been using, cd to the target/classes folder then run the Java app
</p>

<p>
<code>cd target/classes</code><br  />
<code>java com.hagos.HelloWorld</code>
</p>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> Java Execute</h2>
<div class="outline-text-2" id="text-4">
<p>
Maven can do lots of stuff via plugins. One of the things it can do is to execute a Java app from maven. It's not a big deal to cd to target/classes then run the Java app from there. But if you do this lots of times in a day, that can get annoying. 
</p>
</div>

<div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> Maven Exec Plugin</h3>
<div class="outline-text-3" id="text-4-1">
<p>
To make maven run your programs, you need to get the mvn-exec plugin. Using this plugin in your app requires not much else than declaring the plugin in the POM file. Add the plugin in the build section. 
</p>


<pre class="example">
&lt;project&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;com.hagos&lt;/groupId&gt;
  &lt;artifactId&gt;HelloWorld&lt;/artifactId&gt;
  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
  &lt;packaging&gt;jar&lt;/packaging&gt;

  &lt;build&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
        &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;
        &lt;version&gt;1.2.1&lt;/version&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/build&gt;
&lt;/project&gt;
</pre>

<p>
The build node of the POM contains the plugins node. Each plugin, like the mvn-exec, needs to be inside the plugins node. 
</p>

<p>
Now you can do the following command
</p>

<p>
<code>mvn compile</code><br  />
<code>mvn exec:java -DmainClass=com.hagos.HelloWorld</code>
</p>

<p>
If you want to get rid of that pesky -D argument, you can declare the main class inside the POM file.
</p>

<pre class="example">
&lt;plugin&gt;
  &lt;groupId&gt;org.codehaus.mojo&lt;/groupId&gt;
  &lt;artifactId&gt;exec-maven-plugin&lt;/artifactId&gt;
  &lt;version&gt;1.2.1&lt;/version&gt;
  &lt;configuration&gt;
    &lt;mainClass&gt;com.hagos.HelloWorld&lt;/mainClass&gt;
  &lt;/configuration&gt;
&lt;/plugin&gt;
</pre>

<p>
Now that maven knows what the main class is, there is no need to pass the -D argument when you want to execute the Java app from maven
</p>

<p>
<code>mvn compile</code><br  />
<code>mvn exec:java</code>  
</p>
</div>
</div>
</div>


<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5"><span class="section-number-2">5</span> Review of the maven commands</h2>
<div class="outline-text-2" id="text-5">
<dl class="org-dl">
<dt> mvn compile </dt><dd>compiles a maven project
</dd>
<dt> mvn clean </dt><dd>removes the target folder and all of its contentes. It will remove also any jar file packages that may have been created
</dd>
<dt> mvn package </dt><dd>creates a jar package if you specified <i>packaging</i> in the POM file
</dd>
<dt> mvn exec:java </dt><dd>executes a Java app, you need to pass the -DmainClass argument for this command, or you can configure the mainClass in the POM file
</dd>
</dl>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">By: <a href="https://plus.google.com/+TedHagos?rel=author">Ted Hagos (<a href="mailto:tedhagos@gmail.com">tedhagos@gmail.com</a>)</a></p> <p class="date">Updated on: 2014-06-20 Fri 13:59</p><p/>
</div>
</body>
</html>
