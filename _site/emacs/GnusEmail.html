<!DOCTYPE HTML>
<html lang="en">
  <head>
		<link rel="alternate" type="application/rss+xml" title="RSS Feed" href="/feed/" />

<meta charset="utf-8">
 
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="keywords" content="">
<meta name="author" content="Ted Hagos">
<meta name="description" content="" />


<title>
  
    Gnus Email
  
</title>


    <script src="../js/jquery-1.11.2.js"></script>
    <script src="../js/jquery.jpanelmenu.js"></script>
    <link rel="stylesheet" type="text/css" href="/css/style.css" />
  </head>
  <body>

    <div id="menu" style="display:none;">
      
      <h2>emacs</h2>
      <ul>
        <li><a href="/">Home</a></li>
        
          <li><a href="/emacs/emacs-notes.html">Emacs Setup</a></li>
          
          <li><a href="/emacs/emacs-markdown.html">Markdown Documents</a></li>
          
          <li><a href="/emacs/GnusEmail.html">Gnus Email</a></li>
          
          <li><a href="/emacs/emacs-cheatsheet.html">Emacs Cheatsheet</a></li>
          
          <li><a href="/emacs/troubleshooting-org.html">Org problems and errors</a></li>
          
          <li><a href="/emacs/setting-up-org.html">Org Note Taking</a></li>
          
          <li><a href="/emacs/org-postamble.html">Org HTML Postamble</a></li>
          
          <li><a href="/emacs/org-html-publishing-cheatsheet.html">Org HTML Publishing Cheatsheet</a></li>
          
          <li><a href="/emacs/org-cheatsheet.html">Org Cheatsheet</a></li>
          
      </ul>
      
    </div>

    <div id="wrapper">

      <article itemscope itemtype="http://schema.org/Article" >
        <div>
          <span class="menu-trigger">&#9776</span>
          <!--
          <a href="/">&#x2302</a> &raquo;
          <a href=/emacs>emacs</a>
          -->
        </div>
        <headline><h1>Gnus Email</h1></headline>

  		  <articleBody itempprop="articleBody">
  		    <h1 id="goal">Goal</h1>

<ol>
  <li>Get a local copy of Gmail on a notebook/workstation, <strong>offlineimap</strong> seems like a good choice</li>
  <li>Use Gnus in Emacs to read the mail</li>
  <li>Search the email using <strong>notmuch</strong></li>
</ol>

<h1 id="config">Config</h1>

<p>Make sure that IMAP is enabled in your Gmail account. Verify your settings in Gmail first, then come back here to continue the config.</p>

<p><code>touch ~/.gnus</code></p>

<p>Put this entry in the .gnus file, replace <strong>emailaddress@gmail.com</strong> with the real email address</p>

<div class="highlight"><pre><code class="language-lisp" data-lang="lisp"><span class="p">(</span><span class="k">setq</span> <span class="nv">gnus-select-method</span>
  <span class="o">&#39;</span><span class="p">(</span><span class="nv">nnmaildir</span> <span class="s">&quot;GmailDiary&quot;</span>
     <span class="p">(</span><span class="nb">directory</span> <span class="s">&quot;~/.GMailDiary&quot;</span><span class="p">)</span>
     <span class="p">(</span><span class="nv">directory-files</span> <span class="nv">nnheader-directory-files-safe</span><span class="p">)</span>
     <span class="p">(</span><span class="nv">get-new-mail</span> <span class="no">nil</span><span class="p">)))</span>

<span class="p">(</span><span class="k">setq</span> <span class="nv">message-send-mail-function</span> <span class="ss">&#39;smtpmail-send-it</span> 
      <span class="nv">smtpmail-starttls-credentials</span> <span class="o">&#39;</span><span class="p">((</span><span class="s">&quot;smtp.gmail.com&quot;</span> <span class="mi">587</span> <span class="no">nil</span> <span class="no">nil</span><span class="p">))</span> 
      <span class="nv">smtpmail-auth-credentials</span> <span class="o">&#39;</span><span class="p">((</span><span class="s">&quot;smtp.gmail.com&quot;</span> <span class="mi">587</span> <span class="s">&quot;somebody@gmail.com&quot;</span> <span class="no">nil</span><span class="p">))</span> 
      <span class="nv">smtpmail-default-smtp-server</span> <span class="s">&quot;smtp.gmail.com&quot;</span> <span class="nv">smtpmail-smtp-server</span> 
      <span class="s">&quot;smtp.gmail.com&quot;</span> <span class="nv">smtpmail-smtp-service</span> <span class="mi">587</span> 
      <span class="nv">gnus-ignored-newsgroups</span> <span class="s">&quot;^to\\.\\|^[0-9. ]+\\( \\|$\\)\\|^[\&quot;]\&quot;[#&#39;()]&quot;</span><span class="p">)</span>

<span class="p">(</span><span class="k">setq</span> <span class="nv">gnus-secondary-select-methods</span> <span class="o">&#39;</span><span class="p">((</span><span class="nv">nnml</span> <span class="s">&quot;&quot;</span><span class="p">)))</span>
<span class="p">(</span><span class="k">setq</span> <span class="nv">user-mail-address</span> <span class="s">&quot;diaryofted@gmail.com&quot;</span><span class="p">)</span></code></pre></div>

<p><code>touch ~/.authinfo</code></p>

<p>Contents of .authinfo is </p>

<pre><code>machine imap.gmail.com login somebody@gmail.com password secretpassword  port 993 
machine smtp.gmail.com login somebody@gmail.com password secretpassword  port 587
</code></pre>

<p>Replace <strong>secretpassword</strong> with the real password</p>

<h2 id="done-offlineimap">DONE OffLineImap</h2>

<ul>
  <li>[X] Clean this up</li>
  <li>[X] Remove specific usernames and password</li>
</ul>

<p>Now for OffLineImap</p>

<pre><code>[general]
accounts = PHMail
accounts = MyGmailAccount

[Account PHMail]
localrepository = Local
remoterepository = Remote
autorefresh = 5
quick = 10

[Repository Local]
type = Maildir
localfolders = ~/MailPH

[Repository Remote]
type = IMAP
remotehost = TheHostName
remoteuser = someone@somedomain.com
keepalive = 60
holdconnectionopen = yes

[mbnames]
enabled = yes
filename = ~/.mutt/mailboxes
header = "mailboxes "
peritem = "+%(accountname)s/%(foldername)s"
sep = " "
footer = "\n"

[Account MyGmailAccount]
localrepository = MyGMailLocal
remoterepository = MyGmailRemote

[Repository MyGMailLocal]
type = Maildir
remotehost = localhost
remoteuser = linuxUserName
localfolders=~/.MyGMail

[Repository MyGMailRemote]
type = IMAP
remotehost = imap.gmail.com
remoteuser = someone@gmail.com
remotepass = secret
ssl = yes
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
maxconnections = 1
realdelete = no
folderfilter = lambda foldername: foldername in ['INBOX']
holdconnectionopen = true
keepalive = 60
</code></pre>

<h1 id="reading-email">Reading email</h1>

<p><code>M x gnus</code></p>

<p>It will take a while to pull all the emails, so be patient. It looks like ncurses, so basically just navigate to the folders using up and down arrow keys, then press enter on either the INBOX, All Mail etc. </p>

<p>To go up the previous screen, press <strong>p</strong></p>

  		  </articleBody>
  		</article>
      <footer>
        
<author>
  By: <a href='https://plus.google.com/+TedHagos?rel=author'>Ted Hagos</a>
</author>
<dateCreated>
	Date created: June 30, 2014
  
</dateCreated>
<br/>
Url : <a href=/emacs/GnusEmail.html>http://tedhagos.com/emacs/GnusEmail.html</a><br/>
Copyright &copy; <a href="/">Ted Hagos</a>. All rights reserved <br/>
<p>
	Feedback, comments, questions and errata can be sent to tedhagos@gmail.com
</p>



      </footer>
    </div>

    <script type="text/javascript">
      $(document).ready(function(){
        var jPM = $.jPanelMenu();
        jPM.on();
      });
    </script>
  </body>
</html>
