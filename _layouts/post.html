<!DOCTYPE HTML>
<html lang="en">
  <head>
		{% include head.html %}
    <link rel="stylesheet" type="text/css" href="/styles/style.css" />
  </head>
  <body>

  <div class="flexbox">
    <div id="tableofcontents">
      {% for category_name in page.categories limit:1 %}
      <h2>{{ category_name }}</h2>
      <ul>
        {% assign sorted_pages = (site.categories[category_name] | sort: 'title') %}
        <!-- {% for post in site.categories[category_name] %} -->
        {% for post in sorted_pages %}
          <li><a href="{{post.url}}">{{ post.title }}</a></li>
        {% endfor %}
      </ul>
      {% endfor %}
      <h2><a href="/">HOME</a></h2>
    </div>

    <div id="contents">
      <article itemscope itemtype="http://schema.org/Article" >
        <headline><h1>{{ page.title }}</h1></headline>

        <articleBody itempprop="articleBody">
          {{ content }}
        </articleBody>
      </article>

      {% if page.tags.size > 0 %}
      <div id="tagsrelated">

      <!--
      filed under: {{page.tags | array_to_sentence_string }}
      #{{page.tags | join: " #"}} -->


      filed under: #{{page.tags | join: " #"}}
      <br/>
      related docs:
        <ul class="relatedlist">
        {% for post in site.posts %}

            {% assign sameTagCount = 0 %}
            {% assign commonTags = '' %}

            {% for tag in post.tags %}
              {% if page.tags contains tag %}

                {% assign sameTagCount = sameTagCount | plus: 1 %}
                {% capture tagmarkup %} <span class="label label-default">{{ tag }}</span> {% endcapture %}
                {% assign commonTags = commonTags | append: tagmarkup %}

              {% endif %}
            {% endfor %}

            {% if sameTagCount >= 1 %}
              {% if post.title == page.title %}

              {% else %}
              <li>
                <a href="{{ post.url }}">{{ post.title }}</a>
                <!-- {{ commonTags }} -->
              </li>
              {% endif %}

            {% endif %}

        {% endfor %}
      </ul>
      </div>
      {% endif %}

      <footer>
        {% include footer.html %}
      </footer>

    </div>
  </div>

  </body>
</html>
